# AFL Workload & Heatmap Pipeline

This repo provides **workload metrics** and **heatmap visualisations** from AFL player tracking data.  
It processes coordinate-based tracking files (`tracking.csv`) and delivers outputs consumable by the frontend.

---

## ğŸ“‚ Project structure

afl-workload-pipeline/
â”œâ”€ config.yaml                 # thresholds & settings (edit here, no code changes needed)
â”œâ”€ examples/
â”‚  â”œâ”€ tracking.csv             # sample input (~200 frames)
â”‚  â”œâ”€ out_workload.json        # sample workload output
â”‚  â”œâ”€ out_workload.csv         # same data in CSV format
â”‚  â””â”€ heatmaps/                # sample generated PNGs
â”œâ”€ scripts/
â”‚  â”œâ”€ compute_workload.py      # workload metrics CLI
â”‚  â””â”€ generate_heatmaps.py     # heatmap generation CLI
â”œâ”€ workload/                   # workload metric logic (distance, speed, HSR, ratios)
â”œâ”€ heatmaps/                   # heatmap logic (grid, blur, render)
â””â”€ tests/                      # unit tests

## âš™ï¸ Setup

Clone and set up environment:

```bash
git clone https://github.com/<USERNAME>/afl-workload-pipeline.git
cd afl-workload-pipeline

python3 -m venv .venv
source .venv/bin/activate

pip install -r requirements.txt   # or: pip install pandas numpy pyyaml scipy matplotlib imageio

python scripts/compute_workload.py \
  --tracking examples/tracking.csv \
  --config config.yaml \
  --out-json examples/out_workload.json \
  --out-csv  examples/out_workload.csv

Outputs:
	â€¢	JSON: per-player workload indicators (distance, speed, HSR, work/rest, workload score, fatigue risk).
	â€¢	CSV: tidy table for spreadsheets / BI tools.

python scripts/generate_heatmaps.py \
  --tracking examples/tracking.csv \
  --config config.yaml \
  --out-dir examples/heatmaps \
  --group-by player_id

Outputs:
	â€¢	PNG heatmaps in examples/heatmaps/
	â€¢	Configurable grid size (nx, ny), blur (sigma), and weighting mode (conf).

